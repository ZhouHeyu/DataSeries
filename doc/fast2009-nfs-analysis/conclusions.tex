\section{Conclusions}
\label{sec:conclusion}

We have described three improved techniques for packet capture on
networks.  The easily adopted technique should allow anyone capturing
NFS, CIFS, or iSCSI traffic from moderate performance storage systems
($\leq$1Gbit) to capture traffic with no losses.  The most advanced
technique allows lossless capture for 5-10Gbit storage systems, which
is at the high end of most file storage systems. The primary lesson
from this part of the work is that lossless 1Gbit packet capture is
straightforward and up to 10Gbit is possible with an investment in
development time or specialized hardware.

We have provided guidelines for conversion for future practitioners:
parallelizing the conversion, retaining lower-level information, using
reversible anonymization, approaches for testing the conversion tools,
and tagging the trace data with version information.

We have described our binary storage format, which uses chunked
compression with multiple possible compression techniques, typed
relational-style data structuring, delta encoding, and type-safe,
high-speed accessors.  It improves over prior storage formats by up to
100$\times$.

We have described our techniques for improved memory and performance
efficiency to enable analysis of very large data sets.  We 
explained the cube and approximate quantile techniques that we adopted
from the database literature, and our hashtable, rotating hash-map, and
plotting techniques that we use for analyzing the data.

We have analyzed our NFS workload examining some of the different
properties found in a feature animation workload and demonstrating
that our techniques are effective.  We found that our workload had
much more activity than previously described workloads, and that the
file size and sequentiality is different than those workloads.

The tools described in this paper are available as open source from 
\url{http://tesla.hpl.hp.com/opensource/}, and the traces are available
from \url{http://apotheca.hpl.hp.com/pub/datasets/animation-bear/}.

\section{Acknowledgements}

The author would like to thank Alistair Veitch, Jay Wylie, Kimberly
Keeton, our shepherd Daniel Ellard and the anonymous reviewers for
their comments that have greatly improved our paper.

% LocalWords:  Gbit tcpdump Gb Leung pg lindump driverdump endacedump pcap mmap
% LocalWords:  filesystem DL pps tmpfs gzip NIC IP MiB Endace timestamps lzf
% LocalWords:  Ghz Opterons TiB PCI Gbps CIFS iSCSI anonymization chunked
% LocalWords:  hashtable Veitch Keeton Ellard
